{% extends 'base.html' %}
{% load static %}
{% block title %}
<title>Cadastro de Operaçãoes</title>
{% endblock title %}

{% block content %}
<div class="operation-form">
  <span>Cadastro de Operações</span>
  <div class="main-page-form">
    <div class="header-form">
      <div class="text-header-form">
        <p>Informações Operacionais</p>
      </div>
      <div>
        <div class="progressbar-text">
          <p>Informações de Registro</p>
          <p>Informações Gerais</p>
          <p>Informações Operacionais</p>
          <p>Informações da Ocorrência</p>
          <p>Finalizar cadastro</p>
      </div>
        <progress  max="100" value="50" id="progressbar"></progress>
        <ul class="progressbar">
          <li class="progressbar-checked"></li>
          <li class="progressbar-checked"></li>
          <li></li>
          <li></li>
          <li></li>
        </ul>
      </div>
    </div>
    <div class="form-main">
      <form action="/" id="main-form" method="post" enctype="multipart/form-data">
        <input type="hidden" id="form_uuid" value="{{ form_uuid }}">
        <div class="box-form-group">
          <div class="form-group">
            <label>Número de agentes?</label>
            <input type="number" min="1" value="{{ operacao_info.numero_agentes_mobilizados|default:1 }}"
              name="numero_agentes_mobilizados" id="numero_agentes_mobilizados" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Número de viaturas?</label>
            <input type="number" min="0" value="{{ operacao_info.numero_viaturas_mobilizadas|default:0 }}" name="numero_viaturas_mobilizadas"
              id="numero_viaturas_mobilizadas" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Número de veículos blindados?</label>
            <input type="number" min="0" value="{{ operacao_info.numero_veiculos_blindados|default:0 }}" name="numero_veiculos_blindados"
              id="numero_veiculos_blindados" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Número de aeronaves?</label>
            <input type="number" min="0" value="{{ operacao_info.numero_aeronaves|default:0 }}" name="numero_aeronaves"
              id="numero_aeronaves" class="form-control" required>
          </div>
          <div class="form-group">
            <label>Equipes médicas de apoio?</label>
            <input type="number" min="0" value="{{ operacao_info.numero_equipes_medicas|default:0 }}" name="numero_equipes_medicas"
              id="numero_equipes_medicas" class="form-control" required>
          </div>
        </div>

        <div class="box-form-group">
          <div class="input-type-checked">
            <label for="data">Comunicou a equipamentos de saúde e escolas?</label>
            <div class="form-control" id="comunicou_escolas_saude" name="comunicou_escolas_saude" required>
              <label> Sim</label>
              <input type="radio" name="option-comunicou" {% if operacao_info.comunicou_escolas_saude %}checked{% endif %} value="1">
              <label style="margin-left: 20px">Não</label>
              <input type="radio" name="option-comunicou" {% if operacao_info.comunicou_escolas_saude == False %}checked{% endif %} value="0">
            </div>
            <label for="data">Escolas nas proximidades?</label>
            <div class="form-control" id="escolas_perto" name="escolas_perto" required>
              <label> Sim</label>
              <input type="radio" name="option-escolas" value="1" {% if operacao_info.escolas_perto %}checked{% endif %}>
              <label style="margin-left: 20px">Não</label>
              <input type="radio" name="option-escolas" value="0" {% if operacao_info.escolas_perto == False %}checked{% endif %}>
            </div>
            <label for="data">Hospitais nas proximidades?</label>
            <div class="form-control" id="hospitais_perto" name="hospitais_perto" required>
              <label> Sim</label>
              <input type="radio" name="option-hospitais" value="1" {% if operacao_info.hospitais_perto %}checked{% endif %}>
              <label style="margin-left: 20px">Não</label>
              <input type="radio" name="option-hospitais" value="0" {% if operacao_info.hospitais_perto == False %}checked{% endif %}>
            </div>
          </div>
        </div>

        <div class="box-form-group">
          <div class="">
            <label>Análise de riscos e medidas de controle de danos colaterais das operações...</label>
            <input type="text" value="{{ operacao_info.descricao_analise_risco|default:'' }}" name="descricao_analise_risco" id="descricao_analise_risco" class="form-control" required>
          </div>
        </div>
        
      </form>
      <div class="btns-forms">
        <div class="btns-forms">
          <a href="{% url 'operations:form-operational-info-page-one' form_uuid %}">
            <button type="submit" class="btn-previus">Anterior</button>
          </a>
        </div>
          <button type="submit" class="btn-next" onclick="submitFormInfo(event);">Proxímo</button>
      </div>
    </div>
  </div>
</div>
{% endblock content %}

{% block extra_js %}
<script>
//toggleOrdemOperacoesField();
const FORWARD_URL = '/operacoes/cadastro/informacoes/etapa-1-concluida/';
const API_URL = '/v1/operacoes/cria-informacoes-operacionais-parte-2/';
const FORM_VAR_LIST = {
    "numero_viaturas_mobilizadas": "#numero_viaturas_mobilizadas",
    "numero_agentes_mobilizados": "#numero_agentes_mobilizados",
    "numero_veiculos_blindados": "#numero_veiculos_blindados",
    "numero_aeronaves": "#numero_aeronaves",
    "numero_equipes_medicas": "#numero_equipes_medicas",
    "comunicou_escolas_saude": "#comunicou_escolas_saude",
    "escolas_perto": "#escolas_perto",
    "hospitais_perto": "#hospitais_perto",
    "descricao_analise_risco": "#descricao_analise_risco"
};

function toggleOrdemOperacoesField(){
    tipoOperacaoField = document.querySelector("#tipo_operacao");
    ordemOperacoesField = document.querySelector("#numero_ordem_operacoes");
    if(tipoOperacaoField.value == "Em") {
        ordemOperacoesField.disabled = true;
        ordemOperacoesField.classList.add("input-disabled");
    }else {
        ordemOperacoesField.disabled = false;
        ordemOperacoesField.classList.remove("input-disabled");
    }
}

</script>

{% endblock extra_js %}